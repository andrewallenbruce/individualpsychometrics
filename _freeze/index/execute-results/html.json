{
  "hash": "29f086e1bd0dd71b094c8c232f1eae7c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle-block-banner: true\n---\n\n\n\n\n# Preface {.unnumbered}\n\nI have ambitious goals for this book, but it is not nearly complete. I have been working on it off and on since 2012. It is accompanied by the R package [psycheval](https://wjschne.github.io/psycheval/) [@R-psycheval], which is also in a preliminary state of development.\n\n\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n:::\n\n\n\n\nMost of the figures for this book were created in R (via [ggplot2](https://ggplot2.tidyverse.org/) and [base R](https://r-graph-gallery.com/base-R.html)), $\\small\\LaTeX$ (via [Ti*k*Z](https://tikz.dev/)), or [Observable](https://observablehq.com/). To make the content as accessible and transparent as possible, I have included buttons that will reveal the code used to make each figure or table. For example, the initial setup code used for this book can be seen by expanding the note below:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\" button_before='true' button_after='true' codelabel='R Code'}\n:::{.callout-note collapse=\"true\" appearance=\"minimal\"}\n## R Code\n\n```{.r .cell-code}\n# Load packages\nlibrary(conflicted)\nconflicts_prefer(dplyr::select, \n                 dplyr::filter, \n                 scales::alpha, \n                 dplyr::lag,\n                 tibble::add_case)\nlibrary(extrafont)\nloadfonts(\"win\", quiet = TRUE)\nlibrary(knitr)\nlibrary(sn)\nlibrary(fMultivar)\nlibrary(IDPmisc)\nlibrary(psych)\nlibrary(tidyverse)\nlibrary(scales)\n\nlibrary(gganimate)\nlibrary(ggforce)\nlibrary(sjmisc)\nlibrary(WJSmisc)\n# library(tippy)\nlibrary(tikzDevice)\nlibrary(patchwork)\nlibrary(qualvar)\nlibrary(modeest)\nlibrary(tinter)\nlibrary(ggfx)\nlibrary(ggtext)\nlibrary(lemon)\nlibrary(signs)\n\nlibrary(psycheval)\nlibrary(bezier)\nlibrary(DescTools)\nlibrary(ggh4x)\nlibrary(ggthemes)\nlibrary(rsvg)\nlibrary(ggarrow)\nlibrary(arrowheadr)\nlibrary(rgl)\nknitr::knit_hooks$set(webgl = hook_webgl)\narrow_head_deltoid <- purrr::partial(arrowheadr::arrow_head_deltoid, d = 2.3)\n# Set options\noptions(knitr.kable.digits = 2, knitr.kable.na = '')\nknitr::opts_template$set(marginfigure = list(fig.column = \"margin\", fig.cap.location = \"top\", out.width = \"100%\", fig.align = \"left\"),\n                         bodyfigure = list(fig.column = \"body\", fig.cap.location = \"margin\"))\n\n# Default fonts and colors\nbfont = \"Equity Text A Tab\"\nbsize = 16\nmyfills <- c(\"royalblue4\", \"firebrick4\", \"#51315E\")\n\nbtxt_size = ggtext_size(bsize)\n\n# Default geoms and themes\nggplot2::update_geom_defaults(\"text\",\n                              list(family = bfont, size = btxt_size))\nggplot2::update_geom_defaults(\"label\",\n                              list(\n                                family = bfont,\n                                size = btxt_size,\n                                label.padding = unit(0, \"lines\"),\n                                label.size = 0\n                              ))\n\nggplot2::update_geom_defaults(\"richtext\",\n                              list(family = bfont, size = btxt_size))\n\nggplot2::update_geom_defaults(\"density\", list(fill = myfills[1]))\ngeom_text_fill <- function(...) {\n  geom_label(...,\n             label.padding = unit(0, \"lines\"),\n             label.size = 0)\n}\ntheme_set(theme_minimal(base_size = bsize, base_family = bfont))\n\n\n# font family\nspan_style <- function(x, style = \"font-family:serif\") {\n  paste0('<span style=\\\"',\n         style,\n         '\\\">',\n         x,\n         \"</span>\")\n}\n\n\n# Set table column width\n# https://github.com/rstudio/bookdown/issues/122#issuecomment-221101375\nhtml_table_width <- function(kable_output, width, tag = \"</caption>\"){\n  width_html <- paste0(\n    paste0('<col width=\"',\n           width,\n           '\">'),\n    collapse = \"\\n\")\n  sub(tag,\n      paste0(tag,\n             \"\\n\",\n             width_html),\n      kable_output)\n}\n\n# Make a matrix with braces\nbmatrix <- function(M, brace = \"bmatrix\", includenames=TRUE) {\n  if (includenames) {\n    M <- cbind(rownames(M),M)\n    M <- rbind(colnames(M), M)\n  }\n  M <-  paste(apply(M,\n                    MARGIN = 1,\n                    FUN = paste0,\n                    collapse = \" & \"),\n              collapse = \"\\\\\\\\\\n\")\n\n\n  if (!is.null(brace)) {\n    M <- paste0(\"\\\\begin{\",brace,\"}\\n\", M, \"\\n\\\\end{\", brace , \"}\")\n    }\n  M\n}\n\n# Hooks -------\n\n# # Enclose collapsible r chunk in  button\n# knitr::opts_hooks$set(button_r = function(options) {\n#   if (isTRUE(options$button_r)) {\n#     options$button_before_r <- TRUE\n#     options$button_after <- TRUE\n#     options$echo = TRUE\n#     options$eval = FALSE\n#   }\n# \n#   options\n# })\n# \n# # Enclose collapsible latex chunk in  button\n# knitr::opts_hooks$set(button_latex = function(options) {\n#   if (isTRUE(options$button_latex)) {\n#     options$button_before_latex <- TRUE\n#     options$button_after <- TRUE\n#     options$echo = TRUE\n#     options$eval = FALSE\n#   }\n# \n#   options\n# })\n\n# before button for collapsible r chunk\nknit_hooks$set(\n  button_before = function(before, options, envir) {\n    if (before) {\n      if (is.null(options$figlabel)) {\n        l <- options$label %>% \n          str_remove(\"^coder\\\\-\") %>% \n          str_remove(\"^codelatex\\\\-\") %>% \n          str_remove(\"^codeojs\\\\-\") \n        if (str_detect(l, \"^fig\\\\-\") | str_detect(l, \"^tbl\\\\-\")) {\n          options$figlabel <- l\n        }\n        \n      } \n      \n      codetype <- options$codelabel\n      if (!is.null(options$figlabel)) {\n        codetype <- paste0(codetype, \" for @\", options$figlabel)\n      } \n      return(\n        paste0(\n          # '<div class=\"wrap-collapsible\" style=\"margin-top: 1em\">',\n          # \"\\n\",\n          # '<input id=\"collapsible-',\n          # options$label,\n          # '\" class=\"toggle\" type=\"checkbox\">',\n          # \"\\n\",\n          # '<label for=\"collapsible-',\n          # options$label,\n          # '\" class=\"lbl-toggle\">', codetype,'</label>',\n          # '<div class=\"collapsible-content\">',\n          # \"\\n\",\n          # '<div class=\"content-inner\">'\n          ':::{.callout-note collapse=\"true\" appearance=\"minimal\"}\\n## ',codetype\n        )\n      )\n    }\n  }\n)\n\n\n# After button for collapsible chunks\nknit_hooks$set(button_after = function(before, options, envir) {\n  # if (!before) return('</div></div></div>')\n  if (!before) return('\\n:::\\n')\n})\n\n\n# Solution chunk\n# knitr::opts_hooks$set(solution = function(options) {\n#   options$echo <- TRUE\n#   options$solutionsetter <- TRUE\n#   return(options)\n# })\n\nknitr::knit_hooks$set(solutionsetter = function(before,options, envir) {\n  \n  if (before) {\n    \n    \"\\n\\n<details><summary>Suggested Solution</summary>\\n\\n\"\n  } else {\n    \n    \"\\n\\n</details>\\n\\n\"\n  }\n})\n\n\n# Make all chunks with demo-prefix echo = TRUE\n\nknitr::opts_hooks$set(label = function(options) {\n  if (startsWith(options$label, \"demo-\")) {\n    options$echo <- TRUE\n  }\n  if (startsWith(options$label, \"solution-\")) {\n    options$echo <- TRUE\n    options$solutionsetter <- TRUE\n  }\n  if (str_starts(options$label, \"code\")) {\n    options$button_before <- TRUE\n    options$button_after <- TRUE\n    options$echo = TRUE\n    options$eval = FALSE\n    codelanguages <- c(r = \"R Code\", \n                       latex = \"$\\\\small\\\\rm\\\\LaTeX$ Code\",\n                       ojs = \"Observable Code\")\n    mycode <- str_match(options$label, \"^code(.*?)\\\\-\")\n    if (length(mycode) == 2) {\n      options$codelabel = codelanguages[mycode[2]]\n    }\n  }\n  return(options)\n})\n```\n\n\n:::\n:::\n\n\n\n\nIn addition, all the files and code used to create this book can be found in its [Github repository](https://github.com/wjschne/toolkit).\n\nTo avoid repeated citation, I must note that in preparing this book, I have drawn heavily---and no doubt unconsciously---from many authoritative sources on psychometrics, statistical analysis, and linear algebra [@cohenAppliedMultipleRegression2003;@furrPsychometricsIntroduction2017;@crockerIntroductionClassicalModern2006;@nunnallyPsychometricTheory1967;@raykovIntroductionPsychometricTheory2011;@eatonMultivariateStatisticsVector2007; @strangIntroductionLinearAlgebra2016]. I also owe a debt of gratitude to the many unsung authors at  [Wikipedia](https://www.wikipedia.org/) and [Mathematica](https://www.wolfram.com/mathematica/) who maintain wonderfully comprehensive, up-to-date, and well-referenced documentation of all things mathematical and statistical.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}