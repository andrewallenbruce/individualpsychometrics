{
  "hash": "137b82eb615b3bec7d0872689d585d71",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Relative Proficiency\"\n---\n\n\n\n\n\n\n\n## Probability, Odds, and Logits\n\nMost of us are comfortable with the notion of [probability]{.defword title=\"**Probability** is the ratio of the number outcomes in which the event of interest occurrs over the total number of outcomes.\"}, but we find [odds]{.defword title=\"**Odds** refers to the ratio of the number of outcomes in which the event occurs to the number of outcomes in which the event does not occur.\"} to be a little harder to understand. In everyday language, people use *probability* and *odds* interchangeably. Technically, they are related, but not at all the same thing.\n\nWhen the odds of winning are 3 to 1, there will be 3 wins for every loss.\n\n\n\n\n::: {.cell .fig-column-margin .fig-cap-location-margin .tbl-cap-location-margin fig-margin='true' fig.cap.location='top'}\n::: {.cell-output-display}\n![The relationship between probability and odds. Note that probability is bounded by 0 and 1, whereas odds can range from 0 to positive infinity.](relativeproficiency_files/figure-html/fig-p2oddsfigure-1.png){#fig-p2oddsfigure width=100%}\n:::\n:::\n\n\n\n\n\n\n\n\nAs seen in @fig-p2oddsfigure, the relationship between probability and odds is not linear. To convert an odds ratio to probability:\n\n$$\np=\\frac{odds}{1 + odds}\n$$\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\" button_before='true' button_after='true' codelabel='R Code'}\n:::{.callout-note collapse=\"true\" appearance=\"minimal\"}\n## R Code for @fig-p2oddsfigure\n\n```{.r .cell-code}\n# The relationship between probability and odds\ntibble(p = seq(0, .91, .01),\n       odds = p / (1 - p)) %>%\n  ggplot(aes(p, odds)) +\n  geom_arrow(color = myfills[1],\n             arrow_head = my_arrowhead) +\n  scale_x_continuous(\"Probability\",\n                     breaks = seq(0, 1, .2),\n                     labels = prob_label,\n                     limits = c(0, 1)) +\n  scale_y_continuous(\"Odds\", breaks = seq(0, 10, 2)) +\n  theme_minimal(base_size = 30, base_family = bfont)\n```\n\n\n:::\n:::\n\n\n\n\nThus, 3 to 1 odds is:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nodds <- 3 / 1\n\np <- odds / (1 + odds)\np\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.75\n```\n\n\n:::\n:::\n\n\n\n\nOr, 2 to 3 odds is:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nodds <- 2 / 3\np <- odds / (1 + odds)\np\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.4\n```\n\n\n:::\n:::\n\n\n\n\n\nTo convert probability to odds, one can simply use this formula:\n\n$$\nOdds = \\frac{p}{1-p}\n$$\n\n\nIf the probability of an event is .8, then the odds are:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\np <- .8\nodds <- p / (1 - p)\nodds\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\nProbabilities bounded by 0 and 1, inclusive. Odds have a minimum of 0 but have no upper bound (See @fig-p2oddsfigure). \n\nIn many statistical applications, we need to convert a probability to a value that has neither upper nor lower bounds. A [logit]{.defword title=\"A **logit** is a &ldquo;log unit&rdquo;, which is the natural log of the odds.\" inmargin=\"false\"}[A **logit** is a portmanteau of *log unit*. In item-response theory, ability and item difficulty are expressed in terms of logits. Logits are sometimes called the *log-odds* because they are calculated as the (natural) log of the odds: $$\\text{logit}(p)=\\ln\\left(\\frac{p}{1-p}\\right)$$]{.defword .column-margin} maps probabilities onto real numbers from negative to positive infinity (See @fig-p2logits).\n\n\n\n\n::: {.cell .fig-column-margin .fig-cap-location-margin .tbl-cap-location-margin fig-margin='true' fig.cap.location='top'}\n::: {.cell-output-display}\n![The relationship between probability and logits. Whereas probability is bounded by 0 and 1, logits range from negative to positive infinity.](relativeproficiency_files/figure-html/fig-p2logits-1.png){#fig-p2logits width=100%}\n:::\n:::\n\n\n\n\n\n\nA logit is the log-odds of probability. \n\n$$\n\\text{logit}\\left(p\\right)=\\ln\\left(\\frac{p}{1-p}\\right)\n$$\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\" button_before='true' button_after='true' codelabel='R Code'}\n:::{.callout-note collapse=\"true\" appearance=\"minimal\"}\n## R Code for @fig-p2logits\n\n```{.r .cell-code}\n# The relationship between probability and logits\ntibble(p = seq(0, 1, .001),\n       logits = qlogis(p)) %>%\n  ggplot(aes(p, logits)) +\n  geom_arrow(color = myfills[1],\n             arrow_head = my_arrowhead, \n             arrow_fins = my_arrowhead) +\n  scale_x_continuous(\"Probability\",\n                     breaks = seq(0, 1, .2),\n                     labels = prob_label) +\n  scale_y_continuous(\"Logits\",\n                     breaks = seq(-10, 10, 2),\n                     labels = signs) +\n  theme_minimal(base_size = 30, base_family = bfont)\n```\n\n\n:::\n:::\n\n\n\n\n\n## W Scores\n\nIn the same way that we transform z-scores to various kinds of standard scores, we can transform logits to other kinds of scales. The most prominent in psychological assessment is the $W$-score (AKA Growth Score Values), developed by @woodcockCommonScaleMeasurement1971. An accessible discussion of its derivation can by found in @bensonScoresBackgroundDerivation2018.\n\nIf ability $\\theta$ is in logits, then $W$ is calculated like so:\n\n$$\nW = \\frac{20}{\\ln(9)}\\theta+500\n$$\n\nAlthough the coefficient $\\frac{20}{\\ln(9)}$ may seem strange, it has some desirable features. It is equivalent to 20 times the base-9 logarithm of $e$:\n\n$$\n20 \\log_9(e) = \\frac{20}{\\ln(9)} \\approx 9.1024\n$$\n\n\n\n\n\n::: {.cell .fig-column-margin .fig-cap-location-margin .tbl-cap-location-margin fig-margin='true' fig.cap.location='top'}\n::: {.cell-output-display}\n![The relationship between ability-difficulty differences and probability of answering correctly. Note that at &minus;20, &minus;10, 0, +10, and +20 the probabilities are exactly .10, .25, .50, .75, and .90, respectively.](relativeproficiency_files/figure-html/fig-w2p-1.png){#fig-w2p width=100%}\n:::\n:::\n\n\n\n\nThis unusual coefficient yields some nice round probabilities of answering an item correctly when the person's ability and the item's difficulty differ by 0, 10, or 20 points (See @fig-w2p).\n\n\nThe probability $p$ of answering an item correctly depends on the difference between the item's difficulty $W_D$ and the person's ability $W_A$. Specifically, the relationship in @fig-w2p works according to this equation:\n\n\n$$\np = \\left(1 + 9^{\\left(W_D-W_A\\right)/20}\\right)^{-1}\n$$\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\" button_before='true' button_after='true' codelabel='R Code'}\n:::{.callout-note collapse=\"true\" appearance=\"minimal\"}\n## R Code for @fig-w2p\n\n```{.r .cell-code}\n# The relationship between ability-difficulty differences and probability of answering correctly.\nw2p <- function(w, difficulty) {\n  (1 + 9 ^ ((difficulty - w) / 20))^(-1)\n}\n\ntibble(\n  w = seq(445, 555),\n  p = w2p(w, 500),\n  slope = (p - lag(p, default = 0)) / (w - lag(w, default = 1)),\n  theta = atan(slope * 100) + ifelse(p <= .5, pi, -pi) / 2\n) %>%\n  ggplot(aes(w, p)) +\n  geom_arrow(arrow_head = my_arrowhead,\n             arrow_fins = my_arrowhead, \n             color = myfills[1]) +\n  geom_point(data = . %>% filter(w %in% seq(450, 550, 10)),\n             color = myfills[1]) +\n  geom_richtext(\n    data = . %>%\n      filter(w %in% seq(450, 550, 10)),\n    aes(\n      label = prob_label(p, digits = 2),\n      vjust = WJSmisc::angle2vjust(theta),\n      hjust = WJSmisc::angle2hjust(theta)\n    ),\n    label.color = NA,\n    label.padding = unit(0, \"mm\"),\n    label.margin = unit(0.5, \"mm\"),\n    size = ggtext_size(18),\n    color = myfills[1]\n  ) +\n  scale_x_continuous(\n    \"Ability â€“ Difficulty (in W units)\",\n    breaks = seq(450, 550, 10), \n    expand = expansion(),\n    labels = \\(x) paste0(signs::signs(x - 500), if_else(x >= 500, \"\", \"\\u2007\"))\n  ) +\n  scale_y_continuous(\"Probability of Answering Correctly\",\n                     breaks = seq(0, 1, .10),\n                     expand = expansion(),\n                     labels = prob_label) +\n  theme_minimal(base_size = 22, base_family = bfont) +\n  theme(axis.title.x = element_text()) +\n  coord_fixed(100,\n              xlim = c(447, 553),\n              ylim = c(0, 1),\n              clip = \"off\")\n```\n\n\n:::\n:::\n\n\n\n\n\n## Relative Proficiency\n\nOne of the benefits of item response theory models is that ability is expressed on the same scale as item difficulties. This feature allows us to make predictions about how like a person with a particular ability level will correctly answer an item of a particular difficulty.\n\n\n\nThe [Relative Proficiency Index (RPI)]{.defword title=\"The **Relative Proficiency Index (RPI)** tells us the proability a person with of ability $\\theta$ will answer an item correctly given that a person with ability $\\mu_\\theta$ has probability $p$ of answering it correctly.\"} was first used in the *Woodcock Reading Mastery Tests* [@woodcockWoodcockReadingMastery1973]. The RPI answers the following question:\n\n\n> When the average same-age peer with ability $\\mu_\\theta$ has probability $p$ of answering an item, what is the probability of answering correctly for a person of ability $\\theta$?\n\n\nThe RPI can be calculated like so:\n\n$$\nRPI = \\left(1+e^{-\\left(\\theta-\\mu_{\\theta}+\\text{logit}(p)\\right)}\\right)^{-1}\n$$\n$$\n\\begin{align*}\n  \\theta &= \\text{Ability level of person (in logits)}\\\\\n  \\mu_{\\theta} &= \\text{Average ability level (in logits) of a reference group}\\\\\n  p &= \\text{Probability a person with ability } \\mu_\\theta \\text{ will answer correctly}\\\\\n  \\text{logit}(p) &= \\ln\\left(\\frac{p}{1-p}\\right) = p \\text{ converted to logits}\n\\end{align*}\n$$\n\nThe psycheval package can calculate the RPI using the the `rpi` function. By default, the primary inputs `x` and `mu` are assumed to be on the W scale, and the criterion $p$ is .90.\n\nSuppose a person's ability corresponds to a W-score of 460 and same-age peers have an average W score of 500:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(psycheval)\nrpi(x = 460, mu = 500)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.1\n```\n\n\n:::\n:::\n\n\n\n\nThis difference of 40 W score points means that when typical same-age peers have a 90% chance of answering an item correctly (a common benchmark for mastery), this person has a 10% chance of answering the item correctly.\n\nIf `x` and `mu` are logits, then you can specify `scale = 1` like so:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nrpi(x = 1, mu = 0, scale = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.9607297\n```\n\n\n:::\n:::\n\n\n\n\nThe RPI works nicely for documenting deficits, but for gifted students, the RPI is quite high, often near 1. In such cases, we can also calculate the probability a person with ability $\\mu_\\theta$ can answer an item that a person with ability $\\theta$ has a probability $p_\\theta$ of answering correctly:\n\n$$\nRPI_{\\text{reversed}} = \\left(1+e^{-\\left(\\mu_\\theta-\\theta+\\text{logit}(p_\\theta)\\right)}\\right)^{-1}\n$$\n\nSuppose a person has a W score of 550, which is 50 points higher than typical same-age peers. The standard RPI will give a value close to 1:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nrpi(x = 550, mu = 500)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.999543\n```\n\n\n:::\n:::\n\n\n\n\nThis means that when same-age peers have a 90% chance of answering the item correctly, this person is almost certain to answer it correctly. Unfortunately, this fact does not convey the degree of giftedness in an evocative manner.\n\nTo get a better sense of how far advanced this person is compared to the performance of typical same-age peers, we can reverse the RPI like so.\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nrpi(x = 550, mu = 500, reverse = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.03571429\n```\n\n\n:::\n:::\n\n\n\n\nThis means that when this person has a .9 probability of answering an item correctly, the typical same-age peer has about a .036 probability of answering it. Thus, this person is capable of completing tasks that are quite difficult for typical same-age peers.\n\nThe standard RPI refers to a proficiency level of .9, but the `rpi` function can calculate the relative proficiency index at any criterion level. For example:\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\"}\n\n```{.r .cell-code}\nrpi(x = 550, mu = 500, criterion = .10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.9642857\n```\n\n\n:::\n:::\n\n\n\n\nThis means that when a typical same-age peer has a .10 probability of answering an item correctly, this person will answer it correctly with a .96 probability.\n\nAn Excel spreadsheet that calculates this \"generalized\" RPI can be found [here](https://github.com/wjschne/accessingpsyche_resources/raw/main/Generalized%20Relative%20Proficiency%20Index.xlsx).\n\n\n\n\n::: {.cell .fig-cap-location-margin .tbl-cap-location-margin layout-align=\"center\" standalone='true' viewerHeight='600'}\n\n:::\n",
    "supporting": [
      "relativeproficiency_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}